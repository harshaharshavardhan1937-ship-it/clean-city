<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CleanCity - Waste Management App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #2E7D32;
            --secondary-color: #FFC107;
            --accent-color: #2196F3;
            --light-bg: #f5f5f5;
            --dark-text: #333;
            --light-text: #fff;
            --card-bg: #ffffff;
            --error-color: #f44336;
            --success-color: #4caf50;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--dark-text);
            padding-bottom: 70px; /* Space for bottom nav */
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header {
            background-color: var(--primary-color);
            color: var(--light-text);
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        .desktop-nav {
            display: none;
        }
        
        .mobile-menu-btn {
            display: block;
            font-size: 1.5rem;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
        }
        
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--primary-color);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--light-text);
            font-size: 0.8rem;
        }
        
        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .nav-item.active {
            color: var(--secondary-color);
        }
        
        .page {
            display: none;
            padding: 20px 0;
            min-height: calc(100vh - 140px);
        }
        
        .active {
            display: block;
        }
        
        .hero {
            background: linear-gradient(rgba(46, 125, 50, 0.8), rgba(46, 125, 50, 0.9)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%232E7D32"/><path d="M0 0L100 100" stroke="%23388E3C" stroke-width="2"/><path d="M100 0L0 100" stroke="%23388E3C" stroke-width="2"/></svg>');
            color: var(--light-text);
            text-align: center;
            padding: 30px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .hero h1 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .hero p {
            font-size: 1rem;
            margin-bottom: 20px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary-color);
            color: var(--dark-text);
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background-color: #FFA000;
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-google {
            background-color: #DB4437;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        .btn-google:hover {
            background-color: #C03A2E;
        }
        
        .btn-google i {
            margin-right: 10px;
        }
        
        .features {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 30px 0;
        }
        
        .feature-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .feature-card h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .login-form {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .camera-container {
            text-align: center;
            margin: 15px 0;
        }
        
        #camera-preview {
            width: 100%;
            height: 250px;
            background-color: #eee;
            margin: 0 auto 15px;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #camera-preview video, #camera-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .camera-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .garbage-types {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .garbage-type {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .garbage-type:hover {
            transform: translateY(-3px);
        }
        
        .garbage-type.wet {
            border-top: 5px solid #4CAF50;
        }
        
        .garbage-type.dry {
            border-top: 5px solid #FF9800;
        }
        
        .garbage-type.drainage {
            border-top: 5px solid #2196F3;
        }
        
        .garbage-type.garden {
            border-top: 5px solid #9C27B0;
        }
        
        .coins-display {
            text-align: center;
            margin: 20px 0;
        }
        
        .coins-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .withdrawal-section {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        footer {
            background-color: var(--primary-color);
            color: var(--light-text);
            text-align: center;
            padding: 15px 0;
            margin-top: 30px;
        }
        
        .customer-care {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .info-section {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 15px;
        }
        
        .captured-image {
            width: 100%;
            border-radius: 10px;
            margin: 15px auto;
            display: block;
        }
        
        .permission-request {
            background-color: #FFF8E1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        
        .location-tag {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background-color: rgba(46, 125, 50, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
        }
        
        .image-container {
            position: relative;
            display: inline-block;
            margin: 15px 0;
            width: 100%;
        }
        
        .detection-status {
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }
        
        .detection-success {
            background-color: #E8F5E9;
            color: var(--success-color);
            border: 1px solid #C8E6C9;
        }
        
        .detection-failure {
            background-color: #FFEBEE;
            color: var(--error-color);
            border: 1px solid #FFCDD2;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-button i {
            margin-right: 5px;
        }
        
        @media (min-width: 768px) {
            .mobile-nav {
                display: none;
            }
            
            .desktop-nav {
                display: flex;
                list-style: none;
            }
            
            .desktop-nav li {
                margin-left: 20px;
            }
            
            .desktop-nav li a {
                color: white;
                text-decoration: none;
                font-weight: 500;
                transition: opacity 0.3s;
            }
            
            .desktop-nav li a:hover {
                opacity: 0.8;
            }
            
            .mobile-menu-btn {
                display: none;
            }
            
            .features {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .garbage-types {
                grid-template-columns: repeat(4, 1fr);
            }
            
            body {
                padding-bottom: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-trash-alt"></i>
                CleanCity
            </div>
            <nav class="desktop-nav">
                <ul>
                    <li><a href="#" onclick="showPage('home')">Home</a></li>
                    <li><a href="#" onclick="showPage('login')">Login</a></li>
                    <li><a href="#" onclick="showPage('report')">Report</a></li>
                    <li><a href="#" onclick="showPage('withdraw')">Withdraw</a></li>
                    <li><a href="#" onclick="showPage('customer-care')">Support</a></li>
                    <li><a href="#" onclick="showPage('info')">Info</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <div class="container">
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="hero">
                <h1>Keep Your City Clean & Earn Rewards</h1>
                <p>Report waste in your area, help keep your surroundings clean, and earn coins that can be converted to cash rewards.</p>
                <a href="#" class="btn" onclick="showPage('report')">Report Waste Now</a>
            </div>
            
            <div class="features">
                <div class="feature-card">
                    <i class="fas fa-camera"></i>
                    <h3>Click & Report</h3>
                    <p>Take photos of waste in your area and report to municipal department</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-coins"></i>
                    <h3>Earn Coins</h3>
                    <p>Get rewarded with coins for each verified report</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>Withdraw Earnings</h3>
                    <p>Convert your coins to cash when you reach 100 coins</p>
                </div>
            </div>
            
            <div class="coins-display">
                <h2>Your Current Coins</h2>
                <div class="coins-value">75</div>
                <p>Earn 25 more coins to withdraw</p>
            </div>
        </div>
        
        <!-- Login Page -->
        <div id="login" class="page">
            <a href="#" class="back-button" onclick="showPage('home')"><i class="fas fa-arrow-left"></i> Back to Home</a>
            <h2>Login to Your Account</h2>
            <p>Sign in with your Gmail account to access CleanCity services</p>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="email">Gmail Address</label>
                    <input type="email" id="email" placeholder="Enter your Gmail address">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                
                <button class="btn btn-block" onclick="loginWithGmail()">Login</button>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p>Or sign in with</p>
                    <button class="btn btn-google" onclick="googleSSO()">
                        <i class="fab fa-google"></i> Sign in with Google
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Report Waste Page -->
        <div id="report" class="page">
            <a href="#" class="back-button" onclick="showPage('home')"><i class="fas fa-arrow-left"></i> Back to Home</a>
            <h2>Report Waste in Your Area</h2>
            <p>Help keep your surroundings clean by reporting waste accumulation</p>
            
            <div class="permission-request">
                <p>This feature requires camera and location access</p>
                <button class="btn" onclick="requestPermissions()">Grant Permissions</button>
            </div>
            
            <div class="camera-container">
                <div id="camera-preview">
                    <p>Camera preview will appear here</p>
                </div>
                
                <div class="camera-controls">
                    <button class="btn" onclick="activateCamera()"><i class="fas fa-camera"></i> Start Camera</button>
                    <button class="btn" onclick="capturePhoto()"><i class="fas fa-camera-retro"></i> Capture</button>
                </div>
                
                <div id="captured-photo-container" style="display: none;">
                    <h3>Captured Photo with Location</h3>
                    <div class="image-container">
                        <img id="captured-photo" class="captured-image" alt="Captured photo">
                        <div class="location-tag" id="location-tag">Location: Loading...</div>
                    </div>
                    <div id="detection-status" class="detection-status"></div>
                    <button class="btn" onclick="retakePhoto()"><i class="fas fa-sync-alt"></i> Retake</button>
                </div>
            </div>
            
            <div class="form-group">
                <label for="location">Location Coordinates</label>
                <input type="text" id="location" readonly placeholder="Your location will be captured automatically">
            </div>
            
            <h3>Select Waste Type</h3>
            <div class="garbage-types">
                <div class="garbage-type wet" onclick="selectWasteType('wet')">
                    <h4>Wet Waste</h4>
                    <p>Earn 15 coins</p>
                </div>
                <div class="garbage-type dry" onclick="selectWasteType('dry')">
                    <h4>Dry Waste</h4>
                    <p>Earn 20 coins</p>
                </div>
                <div class="garbage-type drainage" onclick="selectWasteType('drainage')">
                    <h4>Drainage Blockage</h4>
                    <p>Earn 40 coins</p>
                </div>
                <div class="garbage-type garden" onclick="selectWasteType('garden')">
                    <h4>Garden Cleaning</h4>
                    <p>Earn 70 coins</p>
                </div>
            </div>
            
            <button class="btn btn-block" style="margin-top: 20px;" onclick="submitReport()">Submit Report</button>
        </div>
        
        <!-- Withdrawal Page -->
        <div id="withdraw" class="page">
            <a href="#" class="back-button" onclick="showPage('home')"><i class="fas fa-arrow-left"></i> Back to Home</a>
            <h2>Withdraw Your Earnings</h2>
            
            <div class="coins-display">
                <h3>Your Current Coins</h3>
                <div class="coins-value">75</div>
                <p>100 coins = ₹20</p>
            </div>
            
            <div class="withdrawal-section">
                <h3>Withdrawal Options</h3>
                <p>You need at least 100 coins to withdraw</p>
                
                <div class="form-group">
                    <label for="withdraw-method">Select Withdrawal Method</label>
                    <select id="withdraw-method" class="form-control">
                        <option value="">Select method</option>
                        <option value="upi">UPI</option>
                        <option value="bank">Bank Transfer</option>
                        <option value="wallet">Mobile Wallet</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="account-details">Account Details</label>
                    <input type="text" id="account-details" placeholder="Enter your account details">
                </div>
                
                <button class="btn btn-block" onclick="requestWithdrawal()">Request Withdrawal</button>
            </div>
        </div>
        
        <!-- Customer Care Page -->
        <div id="customer-care" class="page">
            <a href="#" class="back-button" onclick="showPage('home')"><i class="fas fa-arrow-left"></i> Back to Home</a>
            <h2>Customer Care</h2>
            <p>Contact us for any queries or support</p>
            
            <div class="customer-care">
                <div class="form-group">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>
                
                <div class="form-group">
                    <label for="contact-email">Email Address</label>
                    <input type="email" id="contact-email" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="message">Your Message</label>
                    <textarea id="message" rows="5" placeholder="Enter your query or issue" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;"></textarea>
                </div>
                
                <button class="btn btn-block" onclick="submitQuery()">Submit Query</button>
                
                <div style="margin-top: 30px;">
                    <h3>Contact Information</h3>
                    <p><i class="fas fa-phone"></i> Toll-Free: 1800-123-4567</p>
                    <p><i class="fas fa-envelope"></i> Email: support@cleancity.com</p>
                    <p><i class="fas fa-clock"></i> Working Hours: 9 AM - 6 PM (Mon-Sat)</p>
                </div>
            </div>
        </div>
        
        <!-- Information Page -->
        <div id="info" class="page">
            <a href="#" class="back-button" onclick="showPage('home')"><i class="fas fa-arrow-left"></i> Back to Home</a>
            <h2>About CleanCity App</h2>
            
            <div class="info-section">
                <h3>How It Works</h3>
                <p>1. Sign up using your Gmail account</p>
                <p>2. Report waste in your area by taking photos</p>
                <p>3. Municipal department receives your report</p>
                <p>4. Earn coins for verified reports</p>
                <p>5. Withdraw cash when you accumulate enough coins</p>
            </div>
            
            <div class="info-section">
                <h3>Coin System</h3>
                <p>Wet Waste: 15 coins</p>
                <p>Dry Waste: 20 coins</p>
                <p>Drainage Blockage: 40 coins</p>
                <p>Garden Cleaning: 70 coins</p>
                <p>100 coins = ₹20</p>
            </div>
            
            <div class="info-section">
                <h3>Benefits</h3>
                <p>Helps keep your surroundings clean</p>
                <p>Direct connection to municipal department</p>
                <p>Earn rewards for your contributions</p>
                <p>Completely free to use</p>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <a href="#" class="nav-item active" onclick="showPage('home')">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('report')">
            <i class="fas fa-camera"></i>
            <span>Report</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('withdraw')">
            <i class="fas fa-money-bill-wave"></i>
            <span>Withdraw</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('customer-care')">
            <i class="fas fa-headset"></i>
            <span>Support</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('info')">
            <i class="fas fa-info-circle"></i>
            <span>Info</span>
        </a>
    </nav>

    <footer>
        <div class="container">
            <p>&copy; 2023 CleanCity App. Developed in partnership with Municipal Corporation.</p>
            <p>Helping to create cleaner cities and sustainable environments.</p>
        </div>
    </footer>

    <script>
        // Global variables for camera functionality
        let stream = null;
        let capturedImageData = null;
        let currentLocation = null;
        let garbageDetected = false;
        
        // Function to show the selected page and hide others
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show the selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Set the current nav item as active
            if (pageId === 'home') {
                document.querySelector('.nav-item:nth-child(1)').classList.add('active');
            }
            
            // Stop camera when navigating away from report page
            if (pageId !== 'report' && stream) {
                stopCamera();
            }
        }
        
        // Function to toggle mobile menu (for future use)
        function toggleMobileMenu() {
            // This could be implemented for a side menu in the future
            alert("Mobile menu would open here");
        }
        
        // Function to login with Gmail credentials
        function loginWithGmail() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Basic validation
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            // Simple email validation
            if (!email.includes('@') || !email.includes('.')) {
                alert('Please enter a valid email address');
                return;
            }
            
            // In a real app, this would verify credentials with a backend
            alert('Login successful! Welcome to CleanCity.');
            showPage('home');
        }
        
        // Function to simulate Google Single Sign-On
        function googleSSO() {
            alert('Redirecting to Google authentication. In a real app, this would open Google OAuth flow.');
            // In a real app, this would redirect to Google OAuth
            showPage('home');
        }
        
        // Function to request camera and location permissions
        function requestPermissions() {
            // Request camera permission
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(mediaStream) {
                        alert('Camera access granted!');
                    })
                    .catch(function(error) {
                        alert('Camera access denied: ' + error.message);
                    });
            } else {
                alert('Your browser does not support camera access');
            }
            
            // Request location permission
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        alert('Location access granted!');
                        updateLocation(position);
                    },
                    function(error) {
                        alert('Location access denied: ' + error.message);
                    }
                );
            } else {
                alert('Your browser does not support geolocation');
            }
        }
        
        // Function to update location information
        function updateLocation(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            currentLocation = { lat, lng };
            
            // Get address from coordinates (simulated)
            const address = 'Approx: ${lat.toFixed(4)}, ${lng.toFixed(4)}';
            
            document.getElementById('location').value ='${lat.toFixed(6)}, ${lng.toFixed(6)}';
            
            if (document.getElementById('location-tag')) {
                document.getElementById('location-tag').textContent = address;
            }
        }
        
        // Function to activate camera
        function activateCamera() {
            const cameraPreview = document.getElementById('camera-preview');
            
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                // Stop any existing stream
                if (stream) {
                    stopCamera();
                }
                
                // Request camera access
                navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                    .then(function(mediaStream) {
                        stream = mediaStream;
                        
                        // Create video element if it doesn't exist
                        if (!cameraPreview.querySelector('video')) {
                            const video = document.createElement('video');
                            video.autoplay = true;
                            video.playsInline = true;
                            cameraPreview.innerHTML = '';
                            cameraPreview.appendChild(video);
                        }
                        
                        const video = cameraPreview.querySelector('video');
                        video.srcObject = mediaStream;
                    })
                    .catch(function(error) {
                        cameraPreview.innerHTML = '<p>Error accessing camera: ' + error.message + '</p>';
                    });
            } else {
                cameraPreview.innerHTML = '<p>Your browser does not support camera access</p>';
            }
        }
        
        // Function to stop camera
        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
        }
        
        // Function to capture photo
        function capturePhoto() {
            const video = document.getElementById('camera-preview').querySelector('video');
            
            if (!video || !stream) {
                alert('Please start the camera first');
                return;
            }
            
            // Create canvas to capture image
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Convert to data URL
            capturedImageData = canvas.toDataURL('image/png');
            
            // Display captured image
            const capturedPhoto = document.getElementById('captured-photo');
            capturedPhoto.src = capturedImageData;
            document.getElementById('captured-photo-container').style.display = 'block';
            
            // Update location tag
            if (currentLocation) {
                const address ='Approx: ${currentLocation.lat.toFixed(4)}, ${currentLocation.lng.toFixed(4)}';
                document.getElementById('location-tag').textContent = address;
            }
            
            // Simulate garbage detection
            simulateGarbageDetection();
            
            // Stop camera after capture
            stopCamera();
        }
        
        // Function to simulate garbage detection
        function simulateGarbageDetection() {
            const statusElement = document.getElementById('detection-status');
            // Simulate detection process
            statusElement.textContent = "Analyzing image for garbage...";
            
            setTimeout(() => {
                // Randomly determine if garbage is detected (80% chance of success in this simulation)
                garbageDetected = Math.random() > 0.2;
                
                if (garbageDetected) {
                    statusElement.textContent = "✓ Garbage detected! You can submit this report.";
                    statusElement.className = "detection-status detection-success";
                } else {
                    statusElement.textContent = "✗ No garbage detected. Please take a photo of waste materials.";
                    statusElement.className = "detection-status detection-failure";
                }
            }, 2000);
        }
        
        // Function to retake photo
        function retakePhoto() {
            document.getElementById('captured-photo-container').style.display = 'none';
            document.getElementById('detection-status').textContent = '';
            document.getElementById('detection-status').className = 'detection-status';
            capturedImageData = null;
            garbageDetected = false;
            activateCamera();
        }
        
        // Function to select waste type
        function selectWasteType(type) {
            document.querySelectorAll('.garbage-type').forEach(el => {
                el.style.border = '1px solid #ddd';
                el.style.borderTopWidth = '5px';
            });
            
            event.currentTarget.style.border = '2px solid #2E7D32';
            event.currentTarget.style.borderTopWidth = '5px';
            
            // Store selected waste type
            window.selectedWasteType = type;
        }
        
        // Function to submit report
        function submitReport() {
            if (!capturedImageData) {
                alert('Please capture a photo first');
                return;
            }
            
            if (!garbageDetected) {
                alert('Please capture a photo that contains garbage. Our system could not detect waste in your image.');
                return;
            }
            
            if (!window.selectedWasteType) {
                alert('Please select a waste type');
                return;
            }
            
            if (!currentLocation) {
                alert('Location not available. Please enable location services and try again.');
                return;
            }
            
            alert('Report submitted successfully! The municipal department has been notified.');
            showPage('home');
        }
        
        // Function to request withdrawal
        function requestWithdrawal() {
            alert('Withdrawal request submitted. You will receive your payment after verification.');
        }
        
        // Function to submit customer query
        function submitQuery() {
            alert('Your query has been submitted. Our customer care team will contact you soon.');
            document.getElementById('name').value = '';
            document.getElementById('contact-email').value = '';
            document.getElementById('message').value = '';
        }
        
        // Get GPS location on page load
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    updateLocation(position);
                },
                function(error) {
                    document.getElementById('location').value = 'Location access denied';
                }
            );
        }
    </script>
</body>
</html>